/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { remap as remap$ } from "../../../lib/primitives.js";
import { safeParse } from "../../../lib/schemas.js";
import * as openEnums from "../../types/enums.js";
import { OpenEnum } from "../../types/enums.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";
import {
  PropertyMessagingEventButton,
  PropertyMessagingEventButton$inboundSchema,
  PropertyMessagingEventButton$Outbound,
  PropertyMessagingEventButton$outboundSchema,
} from "./propertymessagingeventbutton.js";
import {
  PropertyMessagingEventChannel,
  PropertyMessagingEventChannel$inboundSchema,
  PropertyMessagingEventChannel$Outbound,
  PropertyMessagingEventChannel$outboundSchema,
} from "./propertymessagingeventchannel.js";
import {
  PropertyMessagingEventMessage,
  PropertyMessagingEventMessage$inboundSchema,
  PropertyMessagingEventMessage$Outbound,
  PropertyMessagingEventMessage$outboundSchema,
} from "./propertymessagingeventmessage.js";
import {
  PropertyMessagingEventUser,
  PropertyMessagingEventUser$inboundSchema,
  PropertyMessagingEventUser$Outbound,
  PropertyMessagingEventUser$outboundSchema,
} from "./propertymessagingeventuser.js";

export const MessagingEventType = {
  MessageReceived: "MESSAGE_RECEIVED",
  ReactionAdded: "REACTION_ADDED",
  ReactionRemoved: "REACTION_REMOVED",
  ButtonClick: "BUTTON_CLICK",
  AppMention: "APP_MENTION",
  ChannelJoined: "CHANNEL_JOINED",
  ChannelLeft: "CHANNEL_LEFT",
  ChannelCreated: "CHANNEL_CREATED",
  ChannelDeleted: "CHANNEL_DELETED",
  UserCreated: "USER_CREATED",
  UserDeleted: "USER_DELETED",
  UserUpdated: "USER_UPDATED",
} as const;
export type MessagingEventType = OpenEnum<typeof MessagingEventType>;

export type MessagingEvent = {
  button?: PropertyMessagingEventButton | undefined;
  channel?: PropertyMessagingEventChannel | undefined;
  createdAt?: Date | undefined;
  id?: string | undefined;
  isReplacingOriginal?: boolean | undefined;
  message?: PropertyMessagingEventMessage | undefined;
  raw?: { [k: string]: any } | undefined;
  type?: MessagingEventType | undefined;
  user?: PropertyMessagingEventUser | undefined;
};

/** @internal */
export const MessagingEventType$inboundSchema: z.ZodType<
  MessagingEventType,
  z.ZodTypeDef,
  unknown
> = openEnums.inboundSchema(MessagingEventType);
/** @internal */
export const MessagingEventType$outboundSchema: z.ZodType<
  string,
  z.ZodTypeDef,
  MessagingEventType
> = openEnums.outboundSchema(MessagingEventType);

/** @internal */
export const MessagingEvent$inboundSchema: z.ZodType<
  MessagingEvent,
  z.ZodTypeDef,
  unknown
> = z.object({
  button: PropertyMessagingEventButton$inboundSchema.optional(),
  channel: PropertyMessagingEventChannel$inboundSchema.optional(),
  created_at: z.string().datetime({ offset: true }).transform(v => new Date(v))
    .optional(),
  id: z.string().optional(),
  is_replacing_original: z.boolean().optional(),
  message: PropertyMessagingEventMessage$inboundSchema.optional(),
  raw: z.record(z.any()).optional(),
  type: MessagingEventType$inboundSchema.optional(),
  user: PropertyMessagingEventUser$inboundSchema.optional(),
}).transform((v) => {
  return remap$(v, {
    "created_at": "createdAt",
    "is_replacing_original": "isReplacingOriginal",
  });
});
/** @internal */
export type MessagingEvent$Outbound = {
  button?: PropertyMessagingEventButton$Outbound | undefined;
  channel?: PropertyMessagingEventChannel$Outbound | undefined;
  created_at?: string | undefined;
  id?: string | undefined;
  is_replacing_original?: boolean | undefined;
  message?: PropertyMessagingEventMessage$Outbound | undefined;
  raw?: { [k: string]: any } | undefined;
  type?: string | undefined;
  user?: PropertyMessagingEventUser$Outbound | undefined;
};

/** @internal */
export const MessagingEvent$outboundSchema: z.ZodType<
  MessagingEvent$Outbound,
  z.ZodTypeDef,
  MessagingEvent
> = z.object({
  button: PropertyMessagingEventButton$outboundSchema.optional(),
  channel: PropertyMessagingEventChannel$outboundSchema.optional(),
  createdAt: z.date().transform(v => v.toISOString()).optional(),
  id: z.string().optional(),
  isReplacingOriginal: z.boolean().optional(),
  message: PropertyMessagingEventMessage$outboundSchema.optional(),
  raw: z.record(z.any()).optional(),
  type: MessagingEventType$outboundSchema.optional(),
  user: PropertyMessagingEventUser$outboundSchema.optional(),
}).transform((v) => {
  return remap$(v, {
    createdAt: "created_at",
    isReplacingOriginal: "is_replacing_original",
  });
});

export function messagingEventToJSON(messagingEvent: MessagingEvent): string {
  return JSON.stringify(MessagingEvent$outboundSchema.parse(messagingEvent));
}
export function messagingEventFromJSON(
  jsonString: string,
): SafeParseResult<MessagingEvent, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => MessagingEvent$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'MessagingEvent' from JSON`,
  );
}
